<div class="col-md-6 col-md-offset-3">
  <%= render "shared/show_book", book: book %>
</div>
<% if logged_in? %>
  <div class="row">
    <div class="col-md-2 col-md-offset-3" id="request_form">
      <% if current_user.request?(book.id) %>
        <% if @request.request_status %>
          <button type="button" class="btn btn-default btn-block" disabled="disabled">
            <%= t :accepted %>
          </button>
        <% else %>
          <%= render "cancel", book_id: book.id %>
        <% end %>
      <% else %>
        <%= render "request", book_id: book.id %>
      <% end %>
    </div>
    <div id="activity_form">
      <div class="col-md-2" id="favorite_form">
        <%= render current_user.activity?("favorite", book.id) ?
          "remove_favorite" : "add_favorite", target_id: book.id %>
      </div>
      <div class="col-md-2" id="read_form">
        <%= render current_user.activity?("read", book.id) ?
          "remove_readbook" : "add_readbook", target_id: book.id %>
      </div>
    </div>
  </div>
  <div id="review_count">
    <%= book.reviews.count %>
    <%= t :reviews %>
  </div>
  <div id="review">
    <section id="review_form">
      <% if current_user.review_book?(book.id).present? %>
        <%= link_to t(:editreview), edit_review_path(current_user.review_book? book.id),
          remote: true %>
      <% else %>
        <%= render "shared/review_form", book: book %>
      <% end %>
    </section>
    <div id="reviews_<%= book.id %>">
      <% if book.reviews.any? %>
        <%= render @reviews, book: book %>
        <%= will_paginate @reviews %>
      <% end %>
    </div>
  </div>
<% end %>
